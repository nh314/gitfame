(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,r){e.exports=r(26)},19:function(e,t,r){},20:function(e,t,r){},21:function(e,t,r){},25:function(e,t,r){},26:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(9),s=r.n(o),c=(r(19),r(11)),i=r(2),p=r(5),l=r(4),u=r(1),m=r(3),h=(r(20),function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){e.preventDefault();var t=r.props.term;""!==t&&r.props.onSubmit&&r.props.onSubmit(t)},r}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.isLoading?"fa-spinner spinning":"fa-search";return a.a.createElement("form",{className:"Input-form",onSubmit:this.onSubmit,ref:this.props.formRef},a.a.createElement("input",{className:"Input",value:this.props.term,onChange:this.props.onTermChange}),a.a.createElement("button",{className:"submit-button",type:"submit"},a.a.createElement("i",{className:"fas fa-lg "+e})))}}]),t}(n.Component)),f={stargazers_count:"Stars",forks_count:"Forks",watchers:"Watchers",open_issues:"Open issues"},d=function(e){return a.a.createElement("label",null,"Sort by",a.a.createElement("select",{onChange:e.onSortPropertyChange},Object.keys(f).map(function(e,t){return a.a.createElement("option",{key:t,value:e},f[e])})),a.a.createElement("select",{onChange:e.onSortOrderChange},a.a.createElement("option",{value:"1"},"DESC"),a.a.createElement("option",{value:"-1"},"ASC")))},v=(r(21),function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderForSearchResulList=function(){return a.a.createElement("div",{onClick:function(e){r.props.onClick&&r.props.onClick(e,r.props.repo)},className:"Repo",title:"Stars: "+r.props.repo.stargazers_count.toLocaleString()+" Forks: "+r.props.repo.forks_count.toLocaleString()},r.props.repo.full_name)},r.renderForCompareList=function(){var e=r.props.repo,t=["stargazers_count","forks_count"];return r.props.additionalProperty&&!t.includes(r.props.additionalProperty)&&t.push(r.props.additionalProperty),a.a.createElement("div",{className:"Repo",onClick:function(e){r.props.onClick&&r.props.onClick(e)}},a.a.createElement("div",{className:"Repo-name"},a.a.createElement("a",{href:e.html_url,target:"_blank"},r.props.repo.full_name)),t.map(function(t,r){return a.a.createElement("div",{className:"Repo-stats",key:r},a.a.createElement("span",{className:"Repo-stat-name"},f[t]),a.a.createElement("span",{className:"Repo-stat-value"},e[t].toLocaleString()))}),a.a.createElement("button",{className:"Repo-btn-remove",onClick:r.props.onRemoveButtonClick},a.a.createElement("i",{className:"fas fa-times"})))},r}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return"compare"===this.props.context?this.renderForCompareList():this.renderForSearchResulList()}}]),t}(n.Component)),g=function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).onRepoClick=function(e,t){return r.props.onRepoClick(e,t)},r}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("div",null,a.a.createElement("div",{className:"app-result-list"},this.props.repos&&this.props.repos.map(function(t){return a.a.createElement(v,{onClick:function(r){e.onRepoClick(r,t)},key:t.id,repo:t})})),this.props.repos.length>0&&a.a.createElement("div",{className:"result-navigatio"},a.a.createElement("button",{onClick:this.props.prevHandler},"Prev"),a.a.createElement("button",{onClick:this.props.nextHandler},"Next")))}}]),t}(n.Component),b=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.sortBy,n=t.order,o=t.repos;if(0===o.length)return a.a.createElement("div",null,"No selected repository");var s=o.sort(function(e,t){return(t[r]-e[r])*n});return a.a.createElement("div",{className:"compare-list"},a.a.createElement(d,{onSortPropertyChange:this.props.onSortPropertyChange,onSortOrderChange:this.props.onSortOrderChange}),s.map(function(t,r){return a.a.createElement(v,{key:t.id,repo:t,context:"compare",additionalProperty:e.props.additionalProperty,onRemoveButtonClick:function(){e.props.onRemoveButton&&e.props.onRemoveButton(r).then(e.props.removeRepoCallBack)}})}))}}]),t}(n.Component);b.defaultProps={repos:[],sortBy:"stargazers_count",order:1};var y=r(7),E=r.n(y),S=r(10),R=r(12),C=function(e){function t(e,r){var n;return Object(i.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).httpStatus=void 0,n.httpStatus=r,n}return Object(m.a)(t,e),t}(Object(R.a)(Error));function O(){return(O=Object(S.a)(E.a.mark(function e(t){var r,n,a,o,s,c=arguments;return E.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:1,n=c.length>2&&void 0!==c[2]?c[2]:10,a="https://api.github.com/search/repositories?per_page=".concat(n=n<100&&n||100,"&q=").concat(encodeURIComponent(t),"&page=").concat(r),e.next=6,fetch(a,{method:"GET"});case 6:return o=e.sent,e.next=9,o.json();case 9:if(s=e.sent,!o.ok){e.next=12;break}return e.abrupt("return",s.items);case 12:throw new C(s.message,o.status);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}r(24),r(25);var k={},j=function(e){function t(){var e,r;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!1,sortProperty:"stargazers_count",sortOrder:1,selectedRepos:[],page:1,term:"",errorMessage:""},r.formRef=a.a.createRef(),r.searchRepo=function(e){var t=r.state.page;if(k[e]){if(k[e][t])return void r.setState({searchResult:k[e][t]})}else k[e]={};r.setState({isLoading:!0}),function(e){return O.apply(this,arguments)}(e,t).then(function(n){var a=t.toString();k[e][a]=n,r.setState({searchResult:k[e][a],errorMessage:""})}).catch(function(e){console.log(e),e instanceof C?r.setState({errorMessage:"GitHub hates you !"}):r.setState({errorMessage:e.message})}).finally(function(){r.setState({isLoading:!1})})},r.navigationNext=function(){var e=r.formRef.current;e&&""!==r.state.term&&r.setState({page:1+r.state.page},function(){e.dispatchEvent(new Event("submit"))})},r.navigationPrev=function(){var e=r.formRef.current,t=-1+r.state.page;e&&""!==r.state.term&&t>0&&r.setState({page:t},function(){e.dispatchEvent(new Event("submit"))})},r.selectRepo=function(e){var t=r.state.selectedRepos;"undefined"===typeof t||t.length<1?r.setState({selectedRepos:[e]}):0===t.filter(function(t){return t.id==e.id}).length&&r.setState({selectedRepos:[].concat(Object(c.a)(t),[e])})},r.setSortProperty=function(e){var t=e.currentTarget.value,n={sortProperty:t,additionalProperty:""};t in["stargazers_count","forks_count"]||(n.additionalProperty=t),r.setState(n)},r.setSortOrder=function(e){r.setState({sortOrder:parseInt(e.currentTarget.value)})},r.removeRepoInComapreList=function(e){var t=r.state.selectedRepos,n=t.splice(e,1);return r.setState({selectedRepos:t}),new Promise(function(e){e(n[0])})},r}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.errorMessage;return a.a.createElement("div",{className:"App"},a.a.createElement("div",{className:"App-header"},a.a.createElement("div",{className:"input-container"},a.a.createElement(h,{term:this.state.term,onSubmit:this.searchRepo,isLoading:this.state.isLoading,formRef:this.formRef,onTermChange:function(t){return e.setState({term:t.currentTarget.value})}}))),t&&a.a.createElement("p",null,t),a.a.createElement("div",{className:"App-content"},a.a.createElement(g,{onRepoClick:function(t,r){e.selectRepo(r)},repos:this.state.searchResult||[],nextHandler:this.navigationNext,prevHandler:this.navigationPrev}),a.a.createElement(b,{repos:this.state.selectedRepos,sortBy:this.state.sortProperty,order:this.state.sortOrder,onSortPropertyChange:this.setSortProperty,onSortOrderChange:this.setSortOrder,additionalProperty:this.state.additionalProperty,onRemoveButton:this.removeRepoInComapreList,removeRepoCallBack:function(e){return console.log(e)}})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[13,1,2]]]);
//# sourceMappingURL=main.2f975113.chunk.js.map