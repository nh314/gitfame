(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,r){e.exports=r(37)},25:function(e,t,r){},26:function(e,t,r){},27:function(e,t,r){},31:function(e,t,r){},37:function(e,t,r){"use strict";r.r(t);var a=r(1),n=r.n(a),o=r(8),s=r.n(o),i=(r(25),r(17)),c=r(3),p=r(6),l=r(5),u=r(2),m=r(4),d=(r(26),function(e){function t(){var e,r;Object(c.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).onSubmit=function(e){e.preventDefault();var t=r.props.term;""!==t&&r.props.onSubmit&&r.props.onSubmit(t)},r}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.isLoading?"fa-spinner spinning":"fa-search";return n.a.createElement("form",{className:"Input-form",onSubmit:this.onSubmit,ref:this.props.formRef},n.a.createElement("input",{className:"Input",value:this.props.term,onChange:this.props.onTermChange}),n.a.createElement("button",{className:"submit-button",type:"submit"},n.a.createElement("i",{className:"fas fa-lg "+e})))}}]),t}(a.Component)),f={stargazers_count:"Stars",forks_count:"Forks",watchers:"Watchers",open_issues:"Open issues"},h=function(e){return n.a.createElement("label",null,"Sort by",n.a.createElement("select",{onChange:e.onSortPropertyChange},Object.keys(f).map(function(e,t){return n.a.createElement("option",{key:t,value:e},f[e])})),n.a.createElement("select",{onChange:e.onSortOrderChange},n.a.createElement("option",{value:"1"},"DESC"),n.a.createElement("option",{value:"-1"},"ASC")))},g=(r(27),function(e){function t(){var e,r;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).renderForSearchResulList=function(){return n.a.createElement("div",{onClick:function(e){r.props.onClick&&r.props.onClick(e,r.props.repo)},className:"Repo",title:"Stars: "+r.props.repo.stargazers_count.toLocaleString()+" Forks: "+r.props.repo.forks_count.toLocaleString()},r.props.repo.full_name)},r.renderForCompareList=function(){var e=r.props.repo,t=["stargazers_count","forks_count"];return r.props.additionalProperty&&!t.includes(r.props.additionalProperty)&&t.push(r.props.additionalProperty),n.a.createElement("div",{className:"Repo",onClick:function(e){r.props.onClick&&r.props.onClick(e)}},n.a.createElement("div",{className:"Repo-name"},n.a.createElement("a",{href:e.html_url,target:"_blank"},r.props.repo.full_name)),t.map(function(t,r){return n.a.createElement("div",{className:"Repo-stats",key:r},n.a.createElement("span",{className:"Repo-stat-name"},f[t]),n.a.createElement("span",{className:"Repo-stat-value"},e[t].toLocaleString()))}),n.a.createElement("button",{className:"Repo-btn-remove",onClick:r.props.onRemoveButtonClick},n.a.createElement("i",{className:"fas fa-times"})))},r}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return"compare"===this.props.context?this.renderForCompareList():this.renderForSearchResulList()}}]),t}(a.Component)),v=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",null,n.a.createElement("div",{className:"app-result-list"},this.props.repos&&this.props.repos.map(function(t){return n.a.createElement(g,{onClick:function(r){e.props.onRepoClick(r,t)},key:t.id,repo:t})})),this.props.repos.length>0&&n.a.createElement("div",{className:"result-navigation"},this.props.currentPage>this.props.minPage&&n.a.createElement("button",{onClick:function(){e.props.passedTerm&&e.props.prevHandler(e.props.passedTerm,e.props.passedPage)}},"Prev"),this.props.currentPage<this.props.maxPage&&n.a.createElement("button",{onClick:function(){e.props.passedTerm&&e.props.nextHandler(e.props.passedTerm,e.props.passedPage)}},"Next")))}}]),t}(a.Component);v.defaultProps={minPage:1,maxPage:100,passedPage:1};var b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.sortBy,a=t.order,o=t.repos;if(0===o.length)return n.a.createElement("div",null,"No selected repository");var s=o.sort(function(e,t){return(t[r]-e[r])*a});return n.a.createElement("div",{className:"compare-list"},n.a.createElement(h,{onSortPropertyChange:this.props.onSortPropertyChange,onSortOrderChange:this.props.onSortOrderChange}),s.map(function(t,r){return n.a.createElement(g,{key:t.id,repo:t,context:"compare",additionalProperty:e.props.additionalProperty,onRemoveButtonClick:function(){e.props.onRemoveButton&&e.props.onRemoveButton(r).then(e.props.removeRepoCallBack)}})}))}}]),t}(a.Component);b.defaultProps={repos:[],sortBy:"stargazers_count",order:1};var y=r(11),O=r.n(y),S=r(14),E=r(18),C=function(e){function t(e,r){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).httpStatus=void 0,a.httpStatus=r,a}return Object(m.a)(t,e),t}(Object(E.a)(Error));function R(){return(R=Object(S.a)(O.a.mark(function e(t){var r,a,n,o,s,i=arguments;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:1,a=i.length>2&&void 0!==i[2]?i[2]:10,n="https://api.github.com/search/repositories?per_page=".concat(a=a<100&&a||100,"&q=").concat(encodeURIComponent(t),"&page=").concat(r),e.next=6,fetch(n,{method:"GET"});case 6:return o=e.sent,e.next=9,o.json();case 9:if(s=e.sent,!o.ok){e.next=12;break}return e.abrupt("return",s);case 12:throw new C(s.message,o.status);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}var k=r(10),P=(r(30),r(31),r(32),1e3),j=10,w={},N=function(e){function t(){var e,r;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return(r=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isLoading:!1,sortProperty:"stargazers_count",sortOrder:1,selectedRepos:[],page:1,term:"",errorMessage:""},r.formRef=n.a.createRef(),r.componentDidMount=function(){console.log("App mounted"),window.addEventListener("online",r.showOnlineStatus),window.addEventListener("offline",r.showOnlineStatus)},r.showOnlineStatus=function(){var e=navigator.onLine?void 0:"You are currently offline !";r.setState({offLineMessage:e})},r.searchRepo=function(e,t){var a=t&&t||1;if(w[e]){if(w[e][a])return void r.setState({searchResult:w[e][a]})}else w[e]={},r.setState({page:1});r.setState({isLoading:!0}),function(e){return R.apply(this,arguments)}(e,a).then(function(t){var n;w[e][a]=t.items,void 0===r.state.maxPage&&t.total_count<P&&(n=Math.ceil(t.total_count/j)),r.setState({searchResult:w[e][a],errorMessage:"",maxPage:n,passedTerm:e})}).catch(function(e){console.log(e),e instanceof C?r.setState({errorMessage:"GitHub hates you !",page:r.state.page-1}):r.setState({errorMessage:e.message})}).finally(function(){r.setState({isLoading:!1})})},r.navigationNext=function(e,t){var a=t+1;r.setState({page:a}),r.searchRepo(e,a)},r.navigationPrev=function(e,t){var a=t-1;a>0&&(r.setState({page:a}),r.searchRepo(e,a))},r.selectRepo=function(e){var t=r.state.selectedRepos;0===t.filter(function(t){return t.id==e.id}).length?r.setState({selectedRepos:[].concat(Object(i.a)(t),[e])},function(){k.b.success(e.full_name+" was added !")}):k.b.warn(e.full_name+" was added already !")},r.setSortProperty=function(e){var t=e.currentTarget.value,a={sortProperty:t,additionalProperty:""};t in["stargazers_count","forks_count"]||(a.additionalProperty=t),r.setState(a)},r.setSortOrder=function(e){r.setState({sortOrder:parseInt(e.currentTarget.value)})},r.removeRepoInComapreList=function(e){var t=r.state.selectedRepos,a=t.splice(e,1);return new Promise(function(e){r.setState({selectedRepos:t},function(){e(a[0])})})},r.renderOfflineMessageContainer=function(){if(r.state.offLineMessage)return n.a.createElement("div",{className:"offLineMessage"},r.state.offLineMessage)},r}return Object(m.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.errorMessage;return n.a.createElement("div",{className:"App"},this.renderOfflineMessageContainer(),n.a.createElement("div",{className:"App-header"},n.a.createElement("div",{className:"input-container"},n.a.createElement(d,{term:this.state.term,onSubmit:this.searchRepo,isLoading:this.state.isLoading,formRef:this.formRef,onTermChange:function(t){return e.setState({term:t.currentTarget.value,maxPage:void 0})}}))),t&&n.a.createElement("p",null,t),n.a.createElement("div",{className:"App-content"},n.a.createElement(v,{onRepoClick:function(t,r){e.selectRepo(r)},repos:this.state.searchResult||[],nextHandler:this.navigationNext,prevHandler:this.navigationPrev,currentPage:this.state.page,maxPage:this.state.maxPage,passedTerm:this.state.passedTerm,passedPage:this.state.page}),n.a.createElement(b,{repos:this.state.selectedRepos,sortBy:this.state.sortProperty,order:this.state.sortOrder,onSortPropertyChange:this.setSortProperty,onSortOrderChange:this.setSortOrder,additionalProperty:this.state.additionalProperty,onRemoveButton:this.removeRepoInComapreList,removeRepoCallBack:function(e){return k.b.error(e.full_name+" removed from the list!")}})),n.a.createElement(k.a,{autoClose:3e3}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.8b33d186.chunk.js.map